webpackJsonp([3],{789:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),function(module){function _classCallCheck(_,e){if(!(_ instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(_,e){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?_:e}function _inherits(_,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);_.prototype=Object.create(e&&e.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(_,e):_.__proto__=e)}function _wrapComponent(_){return function(e){return _reactTransformCatchErrors2(e,_)}}function mapStateToProps(_){return{login:_.login,message:_.message,article:_.article}}var __WEBPACK_IMPORTED_MODULE_0_redBoxBlackStyle__=__webpack_require__(42),__WEBPACK_IMPORTED_MODULE_0_redBoxBlackStyle___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_redBoxBlackStyle__),__WEBPACK_IMPORTED_MODULE_1_redbox_react__=__webpack_require__(43),__WEBPACK_IMPORTED_MODULE_1_redbox_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_redbox_react__),__WEBPACK_IMPORTED_MODULE_2_react__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_react__),__WEBPACK_IMPORTED_MODULE_3_react_transform_catch_errors__=__webpack_require__(44),__WEBPACK_IMPORTED_MODULE_3_react_transform_catch_errors___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_react_transform_catch_errors__),__WEBPACK_IMPORTED_MODULE_4_react_redux__=__webpack_require__(45),__WEBPACK_IMPORTED_MODULE_5__actions__=__webpack_require__(31),__WEBPACK_IMPORTED_MODULE_6__components_Message_Content_Content__=__webpack_require__(798),__WEBPACK_IMPORTED_MODULE_7__components_common_LinkToLogin_LinkToLogin__=__webpack_require__(197),__WEBPACK_IMPORTED_MODULE_8__components_common_Header_Header__=__webpack_require__(296),__WEBPACK_IMPORTED_MODULE_9__utils_getSize__=__webpack_require__(56),_extends=Object.assign||function(_){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(_[a]=t[a])}return _},_createClass=function(){function _(_,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(_,a.key,a)}}return function(e,t,a){return t&&_(e.prototype,t),a&&_(e,a),e}}();!function(){var _=__webpack_require__(2).enterModule;_&&_(module)}();var _components={Message:{displayName:"Message"}},_reactTransformCatchErrors2=__WEBPACK_IMPORTED_MODULE_3_react_transform_catch_errors___default()({filename:"F:/cnode/src/containers/Message.js",components:_components,locals:[],imports:[__WEBPACK_IMPORTED_MODULE_2_react___default.a,__WEBPACK_IMPORTED_MODULE_1_redbox_react___default.a,__WEBPACK_IMPORTED_MODULE_0_redBoxBlackStyle___default.a]}),Message=_wrapComponent("Message")(function(_Component){function Message(){return _classCallCheck(this,Message),_possibleConstructorReturn(this,(Message.__proto__||Object.getPrototypeOf(Message)).apply(this,arguments))}return _inherits(Message,_Component),_createClass(Message,[{key:"componentDidMount",value:function(){var _=this.props,e=_.login,t=_.dispatch,a=_.message;e.accessToken&&0===a.hasReadMessage.length&&t(Object(__WEBPACK_IMPORTED_MODULE_5__actions__.w)(e.accessToken))}},{key:"render",value:function(){var _=this.props,e=_.dispatch,t=(_.currentRouter,_.message),a=_.article,r=_.login;return __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8__components_common_Header_Header__.a,{title:"详情"}),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",{style:{paddingTop:64}},r.succeed&&__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__components_Message_Content_Content__.a,_extends({},t,{dispatch:e,fetchArticle:__WEBPACK_IMPORTED_MODULE_5__actions__.u,article:a,login:r})),!r.succeed&&__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7__components_common_LinkToLogin_LinkToLogin__.a,{dispatch:e}))))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Message}(__WEBPACK_IMPORTED_MODULE_2_react__.Component)),_default=Object(__WEBPACK_IMPORTED_MODULE_4_react_redux__.b)(mapStateToProps)(Message);__webpack_exports__.default=_default,function(){var _=__webpack_require__(2).default,e=__webpack_require__(2).leaveModule;_&&(_.register(Message,"Message","F:/cnode/src/containers/Message.js"),_.register(mapStateToProps,"mapStateToProps","F:/cnode/src/containers/Message.js"),_.register(_default,"default","F:/cnode/src/containers/Message.js"),e(module))}()}.call(__webpack_exports__,__webpack_require__(13)(module))},798:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){function _classCallCheck(_,e){if(!(_ instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(_,e){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?_:e}function _inherits(_,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);_.prototype=Object.create(e&&e.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(_,e):_.__proto__=e)}function _wrapComponent(_){return function(e){return _reactTransformCatchErrors2(e,_)}}var __WEBPACK_IMPORTED_MODULE_0_redBoxBlackStyle__=__webpack_require__(42),__WEBPACK_IMPORTED_MODULE_0_redBoxBlackStyle___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_redBoxBlackStyle__),__WEBPACK_IMPORTED_MODULE_1_redbox_react__=__webpack_require__(43),__WEBPACK_IMPORTED_MODULE_1_redbox_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_redbox_react__),__WEBPACK_IMPORTED_MODULE_2_react__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_react__),__WEBPACK_IMPORTED_MODULE_3_react_transform_catch_errors__=__webpack_require__(44),__WEBPACK_IMPORTED_MODULE_3_react_transform_catch_errors___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_react_transform_catch_errors__),__WEBPACK_IMPORTED_MODULE_4_react_redux__=__webpack_require__(45),__WEBPACK_IMPORTED_MODULE_5__utils_transformDate__=__webpack_require__(107),__WEBPACK_IMPORTED_MODULE_6__styles_scss__=__webpack_require__(799),__WEBPACK_IMPORTED_MODULE_6__styles_scss___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__styles_scss__),__WEBPACK_IMPORTED_MODULE_7_classnames__=__webpack_require__(133),__WEBPACK_IMPORTED_MODULE_7_classnames___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_classnames__),__WEBPACK_IMPORTED_MODULE_8_react_router_dom__=__webpack_require__(46),__WEBPACK_IMPORTED_MODULE_9__actions_hashUrl__=__webpack_require__(37),__WEBPACK_IMPORTED_MODULE_10__utils_routePrefix__=__webpack_require__(57),__WEBPACK_IMPORTED_MODULE_11_material_ui_Tabs__=__webpack_require__(304),__WEBPACK_IMPORTED_MODULE_11_material_ui_Tabs___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_material_ui_Tabs__),__WEBPACK_IMPORTED_MODULE_12_react_swipeable_views__=__webpack_require__(305),__WEBPACK_IMPORTED_MODULE_12_react_swipeable_views___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_react_swipeable_views__),__WEBPACK_IMPORTED_MODULE_13_material_ui_styles_MuiThemeProvider__=__webpack_require__(32),__WEBPACK_IMPORTED_MODULE_13_material_ui_styles_MuiThemeProvider___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_material_ui_styles_MuiThemeProvider__),__WEBPACK_IMPORTED_MODULE_14_material_ui_List__=__webpack_require__(132),__WEBPACK_IMPORTED_MODULE_14_material_ui_List___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_material_ui_List__),__WEBPACK_IMPORTED_MODULE_15_material_ui_Divider__=__webpack_require__(108),__WEBPACK_IMPORTED_MODULE_15_material_ui_Divider___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15_material_ui_Divider__),__WEBPACK_IMPORTED_MODULE_16_material_ui_Avatar__=__webpack_require__(196),__WEBPACK_IMPORTED_MODULE_16_material_ui_Avatar___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16_material_ui_Avatar__),__WEBPACK_IMPORTED_MODULE_17_material_ui_RaisedButton__=__webpack_require__(109),__WEBPACK_IMPORTED_MODULE_17_material_ui_RaisedButton___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_17_material_ui_RaisedButton__),__WEBPACK_IMPORTED_MODULE_18__common_Dialog__=__webpack_require__(198),__WEBPACK_IMPORTED_MODULE_19__common_CircleLoading__=__webpack_require__(299),__WEBPACK_IMPORTED_MODULE_20__actions__=__webpack_require__(31),_createClass=function(){function _(_,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(_,a.key,a)}}return function(e,t,a){return t&&_(e.prototype,t),a&&_(e,a),e}}(),_dec,_class;!function(){var _=__webpack_require__(2).enterModule;_&&_(module)}();var _components={Content:{displayName:"Content"}},_reactTransformCatchErrors2=__WEBPACK_IMPORTED_MODULE_3_react_transform_catch_errors___default()({filename:"F:/cnode/src/components/Message/Content/Content.js",components:_components,locals:[],imports:[__WEBPACK_IMPORTED_MODULE_2_react___default.a,__WEBPACK_IMPORTED_MODULE_1_redbox_react___default.a,__WEBPACK_IMPORTED_MODULE_0_redBoxBlackStyle___default.a]}),Content=_wrapComponent("Content")((_dec=Object(__WEBPACK_IMPORTED_MODULE_4_react_redux__.b)())(_class=function(_Component){function Content(_){_classCallCheck(this,Content);var e=_possibleConstructorReturn(this,(Content.__proto__||Object.getPrototypeOf(Content)).call(this,_));return e.handleChange=function(_){e.setState({slideIndex:_})},e.markMessages=function(){var _=e.props,t=_.dispatch,a=_.login,r=a.accessToken;t(Object(__WEBPACK_IMPORTED_MODULE_20__actions__.B)(r)),e.setState({isUpdating:!0})},e.close=function(){e.setState({isOpen:!1})},e.state={slideIndex:0,isOpen:!1,isUpdating:!1},e}return _inherits(Content,_Component),_createClass(Content,[{key:"componentWillUpdate",value:function(_){var e=_.dispatch,t=_.login,a=_.isMarked,r=_.hasNotReadMessage,n=t.accessToken;a&&a!==this.props.isMarked&&e(Object(__WEBPACK_IMPORTED_MODULE_20__actions__.w)(n)),a&&0===r.length&&r.length!==this.props.hasNotReadMessage.length&&this.setState({isUpdating:!1})}},{key:"render",value:function(){var _=this,e=this.props,t=e.dispatch,a=e.hasNotReadMessage,r=e.hasReadMessage,n=e.article,E=e.fetchArticle;return __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",null,this.state.isUpdating&&__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_19__common_CircleLoading__.a,null)),!this.state.isUpdating&&__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_material_ui_styles_MuiThemeProvider___default.a,null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_material_ui_Tabs__.Tabs,{onChange:this.handleChange,value:this.state.slideIndex},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_material_ui_Tabs__.Tab,{label:__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("h2",null,"未读消息:",a&&a.length),value:0}),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_material_ui_Tabs__.Tab,{label:__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("h2",null,"已读消息:",r&&r.length),value:1})),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_12_react_swipeable_views___default.a,{index:this.state.slideIndex,onChangeIndex:this.handleChange},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",null,a&&0===a.length&&__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",{className:__WEBPACK_IMPORTED_MODULE_6__styles_scss___default.a.msg},"暂无未读消息")),a.length>0&&__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_14_material_ui_List__.List,null,a.map(function(_,e){return __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_react_router_dom__.a,{key:e,to:__WEBPACK_IMPORTED_MODULE_10__utils_routePrefix__.a+"/topic/"+_.topic.id,className:__WEBPACK_IMPORTED_MODULE_6__styles_scss___default.a.link,onClick:function(e){t(Object(__WEBPACK_IMPORTED_MODULE_9__actions_hashUrl__.d)({transition:"move"})),n[_.topic.id]?n.currentTopicId!==topic.id&&t(E(_.topic.id,!1)):t(E(_.topic.id))}},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_14_material_ui_List__.ListItem,{leftAvatar:__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_16_material_ui_Avatar___default.a,{src:_.author.avatar_url}),primaryText:_.author.loginname,secondaryText:__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",{className:__WEBPACK_IMPORTED_MODULE_6__styles_scss___default.a.oneline,dangerouslySetInnerHTML:{__html:_.reply.content}}),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("p",{style:{fontSize:"14px"}},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("span",null,"来自:",_.topic.title),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("span",{style:{float:"right"}},Object(__WEBPACK_IMPORTED_MODULE_5__utils_transformDate__.a)(_.reply.create_at)))),secondaryTextLines:2}),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15_material_ui_Divider___default.a,{inset:!0}))})),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",{style:{textAlign:"center"}},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_17_material_ui_RaisedButton___default.a,{label:"清空未读消息",primary:!0,onClick:function(e){_.setState({isOpen:!0})}})),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_18__common_Dialog__.a,{isOpen:this.state.isOpen,title:"注意",action:this.markMessages,close:this.close},"是否将所有未读消息标记为已读？"))),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",null,0===r.length&&__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",{className:__WEBPACK_IMPORTED_MODULE_6__styles_scss___default.a.msg},"您还没有查看过任何消息哦"),r.length>0&&__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_14_material_ui_List__.List,null,r.map(function(_,e){return __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_react_router_dom__.a,{key:e,to:__WEBPACK_IMPORTED_MODULE_10__utils_routePrefix__.a+"/topic/"+_.topic.id,className:__WEBPACK_IMPORTED_MODULE_6__styles_scss___default.a.link,onClick:function(e){t(Object(__WEBPACK_IMPORTED_MODULE_9__actions_hashUrl__.d)({transition:"move"})),n[_.topic.id]?n.currentTopicId!==topic.id&&t(E(_.topic.id,!1)):t(E(_.topic.id))}},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_14_material_ui_List__.ListItem,{leftAvatar:__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_16_material_ui_Avatar___default.a,{src:_.author.avatar_url}),primaryText:_.author.loginname,secondaryText:__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("div",{className:__WEBPACK_IMPORTED_MODULE_6__styles_scss___default.a.oneline,dangerouslySetInnerHTML:{__html:_.reply.content}}),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("p",{style:{fontSize:"14px"}},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("span",null,"来自:",_.topic.title),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement("span",{style:{float:"right"}},Object(__WEBPACK_IMPORTED_MODULE_5__utils_transformDate__.a)(_.reply.create_at)))),secondaryTextLines:2}),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15_material_ui_Divider___default.a,{inset:!0}))})))))))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Content}(__WEBPACK_IMPORTED_MODULE_2_react__.Component))||_class),_default=Content;__webpack_exports__.a=_default,function(){var _=__webpack_require__(2).default,e=__webpack_require__(2).leaveModule;_&&(_.register(Content,"Content","F:/cnode/src/components/Message/Content/Content.js"),_.register(_default,"default","F:/cnode/src/components/Message/Content/Content.js"),e(module))}()}).call(__webpack_exports__,__webpack_require__(13)(module))},799:function(_,e,t){e=_.exports=t(195)(!1),e.push([_.i,".components-Message-Content-styles-content-1lvAg {\n  margin-top: 64px;\n  overflow: hidden; }\n\n.components-Message-Content-styles-link-PuXBJ {\n  display: block; }\n\n.components-Message-Content-styles-msg-1VGaD {\n  padding: 20px;\n  text-align: center;\n  font-size: 24px; }\n\n.components-Message-Content-styles-oneline-V4J8p {\n  font-weight: bold;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap; }\n",""]),e.locals={content:"components-Message-Content-styles-content-1lvAg",link:"components-Message-Content-styles-link-PuXBJ",msg:"components-Message-Content-styles-msg-1VGaD",oneline:"components-Message-Content-styles-oneline-V4J8p"}}});
//# sourceMappingURL=Message.js.map